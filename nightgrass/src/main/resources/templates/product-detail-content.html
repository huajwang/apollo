<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>
<div th:fragment="productDetailContent">
  <div class="product-detail-container">
    <!-- Carousel Section -->
    <div class="carousel">
      <div class="carousel-track">
        <div th:each="productPhoto : ${productPhotos}" class="carousel-slide">
          <img th:src="${productPhoto.photoUrl}" alt="Product Photo">
        </div>
      </div>
      <!-- Navigation buttons -->
      <button class="carousel-button prev" id="prevBtn">❮</button>
      <button class="carousel-button next" id="nextBtn">❯</button>
    </div>

    <!-- Video Icons Section -->
    <div class="video-icons">
      <div th:each="video : ${productVideos}" class="video-icon">
        <a th:href="@{/videos/{filename}(filename=${video.fileName})}" target="_blank">
          <img src="/icons/video-icon.png" alt="Play Video" class="video-icon-image">
        </a>
      </div>
    </div>

    <!-- Optional Video Modal -->
    <div id="videoModal" class="modal" style="display: none;">
      <div class="modal-content">
        <span id="closeModal" class="close">&times;</span>
        <video id="videoPlayer" controls>
          <source id="videoSource" src="" type="video/mp4">
          Your browser does not support the video tag.
        </video>
      </div>
    </div>

    <section class="product-details">
      <div class="product-info">
        <!-- Product Name -->
        <h1 th:text="${product.productName}">Product Name</h1>

        <!-- Product Price -->
        <p class="price">$<span th:text="${product.price}"></span></p>

        <!-- Reviews -->
        <div class="reviews">
          <div class="stars">
            ★★★★☆
          </div>
          <span class="review-count">5 Customer Reviews</span>
        </div>

        <!-- Product Description -->
        <p class="description" th:text="${product.description}">
        </p>

        <!-- Product Options Section -->
        <div class="product-options">
          <div th:each="property : ${productProperties}">
            <div class="option-group">
              <h3 th:text="${property.propertyName} + ':'"></h3>
              <div class="option-buttons">
                <button type="button"
                        class="option-button"
                        th:data-property="${property.propertyName}"
                        th:text="${value}"
                        th:data-value="${value}"
                        th:each="value, iterStat : ${property.propertyValue.split(',')} "
                        th:classappend="${iterStat.index == 0 ? 'selected' : ''}">
                </button>
              </div>
            </div>
          </div>
        </div>

      </div>
    </section>

    <section class="product-tabs">
      <div class="tabs">
        <button class="tab-link active" onclick="openTab(event, 'description')">Description</button>
        <button class="tab-link" onclick="openTab(event, 'additional-info')">Additional Information</button>
        <button class="tab-link" onclick="openTab(event, 'reviews')">Reviews [5]</button>
      </div>

      <div id="description" class="tab-content active">
        <p>
          Embodying the raw, wayward spirit of rock 'n' roll, the Kilburn portable active stereo speaker takes the unmistakable look and sound of Marshall, unplugs the chords, and takes the show on the road.
        </p>
        <p>
          Weighing in under 7 pounds, the Kilburn is a lightweight piece of vintage styled engineering. Setting the bar as one of the loudest speakers in its class, the Kilburn is a compact, stout-hearted hero with a well-balanced audio which boasts a clear midrange and extended highs for a sound that is both articulate and pronounced.
        </p>
        <div class="images">
          <img src="/images/lake.jpg" alt="Sofa View 1">
          <img src="/images/lake.jpg" alt="Sofa View 2">
        </div>
      </div>

      <div id="additional-info" class="tab-content">
        <p>Material: Premium leather upholstery</p>
        <p>Dimensions: 85 x 35 x 40 inches</p>
        <p>Warranty: 5 years</p>
      </div>

      <div id="reviews" class="tab-content">
        <p><strong>John Doe:</strong> This is an amazing product! High quality and perfect for my living room.</p>
        <p><strong>Jane Smith:</strong> Absolutely love the design and comfort. Worth every penny.</p>
      </div>
    </section>


    <!-- Action Buttons Section -->
    <div class="action-buttons">
      <form th:action="@{/cart/add}" method="post" id="add-to-cart-form">
        <input type="hidden" name="productId" th:value="${product.productId}">
        <!-- Dynamic properties -->
        <input type="hidden"
               th:each="property : ${productProperties}"
               th:id="'selected-' + ${property.propertyName}"
               th:name="'properties[' + ${property.propertyName} + ']'"
               th:value="${property.propertyValue.split(',')[0]}">

        <button type="submit" class="add-to-cart">Add to Cart</button>
      </form>
      <button class="buy-now">Buy Now</button>
    </div>
  </div>
</div>



</body>
</html>
